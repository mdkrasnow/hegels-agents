{
  "timestamp": "2025-12-02 17:33:09",
  "corpus_directory": "/Users/mkrasnow/Desktop/hegels-agents/corpus_data",
  "test_results": {
    "setup": {
      "setup_time": 0.11224913597106934,
      "enhanced_retriever_ready": true,
      "baseline_retriever_ready": true,
      "enhanced_stats": {
        "status": "ready",
        "ready": true,
        "chunks": 153,
        "files": 12,
        "vocabulary_size": 3434,
        "index_features": {
          "phrase_index": true,
          "positional_index": true,
          "bm25_scoring": true,
          "semantic_chunking": true
        },
        "cache": {
          "enabled": true,
          "size": 0,
          "limit": 1000
        }
      },
      "baseline_stats": {
        "status": "loaded",
        "indexed": true,
        "files": {
          "total": 12,
          "by_extension": {
            ".txt": 12
          }
        },
        "chunks": {
          "total": 106,
          "avg_size": 768.0849056603773,
          "min_size": 157,
          "max_size": 950
        },
        "content": {
          "total_length": 84616,
          "avg_file_length": 7051.333333333333
        },
        "search": {
          "method": "hybrid",
          "vocabulary_size": 3363
        },
        "index_metadata": {
          "created_at": "2025-12-02T17:33:06.543707",
          "files_loaded": 12,
          "total_chunks": 106,
          "loading_time": 0.017207,
          "corpus_dir": "/Users/mkrasnow/Desktop/hegels-agents/corpus_data",
          "chunk_size": 800,
          "chunk_overlap": 150,
          "indexed_at": "2025-12-02T17:33:06.558675",
          "indexing_time": 0.014922,
          "search_method": "hybrid"
        }
      }
    },
    "enhanced_features": {
      "feature_tests": [
        {
          "query": "quantum mechanics uncertainty principle wave particle",
          "description": "Complex physics query testing BM25 and phrase matching",
          "query_time": 0.05529594421386719,
          "num_results": 10,
          "feature_analysis": {
            "has_quality_scores": true,
            "similarity_distribution": {
              "min": 1.0,
              "max": 1.0,
              "avg": 1.0,
              "std": 0.0
            },
            "content_diversity": 0.5,
            "feature_evidence": [
              "multi_score_combination",
              "phrase_matching",
              "multi_score_combination",
              "phrase_matching",
              "multi_score_combination",
              "phrase_matching"
            ]
          },
          "top_similarities": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "quality_scores": [
            1.0,
            0.9444444444444445,
            0.8888888888888888
          ]
        },
        {
          "query": "machine learning neural networks deep learning",
          "description": "Multi-term query testing positional indexing",
          "query_time": 0.046998023986816406,
          "num_results": 10,
          "feature_analysis": {
            "has_quality_scores": true,
            "similarity_distribution": {
              "min": 1.0,
              "max": 1.0,
              "avg": 1.0,
              "std": 0.0
            },
            "content_diversity": 0.5,
            "feature_evidence": [
              "multi_score_combination",
              "phrase_matching",
              "multi_score_combination",
              "phrase_matching",
              "multi_score_combination",
              "phrase_matching"
            ]
          },
          "top_similarities": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "quality_scores": [
            0.8888888888888888,
            0.8888888888888888,
            0.8333333333333334
          ]
        },
        {
          "query": "evolution natural selection species adaptation",
          "description": "Biology query testing quality validation",
          "query_time": 0.10758805274963379,
          "num_results": 10,
          "feature_analysis": {
            "has_quality_scores": true,
            "similarity_distribution": {
              "min": 1.0,
              "max": 1.0,
              "avg": 1.0,
              "std": 0.0
            },
            "content_diversity": 0.3,
            "feature_evidence": [
              "multi_score_combination",
              "phrase_matching",
              "multi_score_combination",
              "phrase_matching",
              "multi_score_combination",
              "phrase_matching"
            ]
          },
          "top_similarities": [
            1.0,
            1.0,
            1.0,
            1.0,
            1.0
          ],
          "quality_scores": [
            0.9333333333333332,
            0.9333333333333332,
            0.9333333333333332
          ]
        }
      ],
      "enhanced_features_working": true,
      "avg_query_time": 0.06996067365010579
    },
    "quality_comparison": {
      "comparison_results": [
        {
          "query": "quantum physics uncertainty principle Heisenberg",
          "enhanced": {
            "num_results": 10,
            "avg_similarity": 1.0,
            "top_similarity": 1.0,
            "quality_score": 0.36000000000000004
          },
          "baseline": {
            "num_results": 10,
            "avg_similarity": 0.07731648621219656,
            "top_similarity": 0.3482932435306475,
            "quality_score": 0.3200000000000001
          },
          "improvements": {
            "similarity_improvement": 0.9226835137878034,
            "quality_improvement": 0.039999999999999925,
            "result_count_change": 0
          }
        },
        {
          "query": "evolution natural selection Darwin species origin",
          "enhanced": {
            "num_results": 10,
            "avg_similarity": 1.0,
            "top_similarity": 1.0,
            "quality_score": 0.4166666666666667
          },
          "baseline": {
            "num_results": 10,
            "avg_similarity": 0.08740333926074881,
            "top_similarity": 0.23444402138485324,
            "quality_score": 0.35
          },
          "improvements": {
            "similarity_improvement": 0.9125966607392512,
            "quality_improvement": 0.06666666666666671,
            "result_count_change": 0
          }
        },
        {
          "query": "machine learning algorithms neural networks deep",
          "enhanced": {
            "num_results": 10,
            "avg_similarity": 1.0,
            "top_similarity": 1.0,
            "quality_score": 0.29999999999999993
          },
          "baseline": {
            "num_results": 10,
            "avg_similarity": 0.050165098544201855,
            "top_similarity": 0.15111602160861062,
            "quality_score": 0.2666666666666666
          },
          "improvements": {
            "similarity_improvement": 0.9498349014557982,
            "quality_improvement": 0.033333333333333326,
            "result_count_change": 0
          }
        },
        {
          "query": "philosophy ethics moral virtue consequentialism",
          "enhanced": {
            "num_results": 10,
            "avg_similarity": 1.0,
            "top_similarity": 1.0,
            "quality_score": 0.4600000000000001
          },
          "baseline": {
            "num_results": 10,
            "avg_similarity": 0.10902990028841546,
            "top_similarity": 0.20791777879156337,
            "quality_score": 0.4
          },
          "improvements": {
            "similarity_improvement": 0.8909700997115846,
            "quality_improvement": 0.06000000000000005,
            "result_count_change": 0
          }
        },
        {
          "query": "mathematics calculus derivative integral limit",
          "enhanced": {
            "num_results": 10,
            "avg_similarity": 1.0,
            "top_similarity": 1.0,
            "quality_score": 0.3200000000000001
          },
          "baseline": {
            "num_results": 8,
            "avg_similarity": 0.07759914078474076,
            "top_similarity": 0.17800123831674716,
            "quality_score": 0.3
          },
          "improvements": {
            "similarity_improvement": 0.9224008592152593,
            "quality_improvement": 0.02000000000000013,
            "result_count_change": 2
          }
        }
      ],
      "overall_improvements": {
        "avg_similarity_improvement": 0.9196972069819394,
        "avg_quality_improvement": 0.044000000000000025,
        "queries_tested": 5
      },
      "quality_better": true
    },
    "performance_comparison": {
      "enhanced_performance": {
        "avg_time": 0.0742410659790039,
        "max_time": 0.13225436210632324,
        "min_time": 0.04377102851867676,
        "total_time": 0.37120532989501953
      },
      "baseline_performance": {
        "avg_time": 0.0019423484802246094,
        "max_time": 0.0029668807983398438,
        "min_time": 0.0012969970703125,
        "total_time": 0.009711742401123047
      },
      "performance_overhead": 0.0722987174987793,
      "acceptable_overhead": true
    },
    "validation": {
      "validation_successful": true,
      "validation_report": {
        "timestamp": "2025-12-02T17:33:09.592823",
        "validation_summary": {
          "total_tests": 3,
          "passed_tests": 3,
          "avg_score": 1.0,
          "all_passed": true
        },
        "validation_details": [
          {
            "test_name": "corpus_structure",
            "passed": true,
            "score": 1.0,
            "details": {
              "checks": {
                "has_chunks": true,
                "has_files": true,
                "has_vocabulary": true,
                "status_ready": true
              },
              "stats": {
                "status": "ready",
                "ready": true,
                "chunks": 153,
                "files": 12,
                "vocabulary_size": 3434,
                "index_features": {
                  "phrase_index": true,
                  "positional_index": true,
                  "bm25_scoring": true,
                  "semantic_chunking": true
                },
                "performance": {
                  "queries": 13,
                  "avg_retrieval_time": 0.0696097337282621,
                  "avg_embedding_time": 0.0,
                  "avg_results_per_query": 9.692307692307692,
                  "avg_similarity_score": 1.0,
                  "cache_hit_rate": 0.0,
                  "total_retrieval_time": 0.9049265384674072,
                  "total_embedding_time": 0.0
                },
                "cache": {
                  "enabled": true,
                  "size": 13,
                  "limit": 1000
                }
              },
              "passed_checks": 4,
              "total_checks": 4
            },
            "timestamp": "2025-12-02T17:33:07.486987"
          },
          {
            "test_name": "retrieval_functionality",
            "passed": true,
            "score": 1.0,
            "details": {
              "test_queries": [
                "quantum mechanics",
                "evolution biology",
                "machine learning",
                "philosophy ethics",
                "mathematics calculus"
              ],
              "results_summary": [
                {
                  "query": "quantum mechanics",
                  "num_results": 5,
                  "avg_similarity": 1.0,
                  "max_similarity": 1.0,
                  "has_results": true
                },
                {
                  "query": "evolution biology",
                  "num_results": 5,
                  "avg_similarity": 1.0,
                  "max_similarity": 1.0,
                  "has_results": true
                },
                {
                  "query": "machine learning",
                  "num_results": 5,
                  "avg_similarity": 1.0,
                  "max_similarity": 1.0,
                  "has_results": true
                },
                {
                  "query": "philosophy ethics",
                  "num_results": 5,
                  "avg_similarity": 1.0,
                  "max_similarity": 1.0,
                  "has_results": true
                },
                {
                  "query": "mathematics calculus",
                  "num_results": 5,
                  "avg_similarity": 1.0,
                  "max_similarity": 1.0,
                  "has_results": true
                }
              ],
              "queries_with_results": 5
            },
            "timestamp": "2025-12-02T17:33:07.487035"
          },
          {
            "test_name": "performance_thresholds",
            "passed": true,
            "score": 1.0,
            "details": {
              "avg_time": 0.06247024536132813,
              "max_time": 0.09826517105102539,
              "avg_results": 10.0,
              "thresholds": {
                "avg_time_under_1s": true,
                "max_time_under_2s": true,
                "avg_results_above_3": true
              },
              "timings": [
                0.058606863021850586,
                0.05873394012451172,
                0.09826517105102539,
                0.05209922790527344,
                0.04464602470397949
              ],
              "result_counts": [
                10,
                10,
                10,
                10,
                10
              ]
            },
            "timestamp": "2025-12-02T17:33:07.777606"
          }
        ],
        "quality_metrics": {
          "precision_at_k": [
            1.0,
            0.9444444444444443,
            0.9333333333333332,
            0.8000000000000002
          ],
          "recall_at_k": [
            0.3333333333333333,
            0.9444444444444443,
            1.0,
            1.0
          ],
          "f1_at_k": [
            0.5,
            0.9444444444444443,
            0.9583333333333334,
            0.8819659442724458
          ],
          "ndcg_at_k": [
            1.0,
            0.9960166355966013,
            0.9871435425951663,
            0.9829627986883617
          ],
          "mean_reciprocal_rank": 1.0,
          "average_precision": 0.9481880406483582
        },
        "quality_report": {
          "timestamp": "2025-12-02T17:33:08.410011",
          "overall_assessment": {
            "mrr": {
              "score": 1.0,
              "level": "Excellent"
            },
            "map": {
              "score": 0.9481880406483582,
              "level": "Excellent"
            }
          },
          "precision_analysis": [
            {
              "k": 1,
              "score": 1.0,
              "level": "Excellent"
            },
            {
              "k": 3,
              "score": 0.9444444444444443,
              "level": "Excellent"
            },
            {
              "k": 5,
              "score": 0.9333333333333332,
              "level": "Excellent"
            },
            {
              "k": 10,
              "score": 0.8000000000000002,
              "level": "Excellent"
            }
          ],
          "recall_analysis": [
            {
              "k": 1,
              "score": 0.3333333333333333,
              "level": "Poor"
            },
            {
              "k": 3,
              "score": 0.9444444444444443,
              "level": "Excellent"
            },
            {
              "k": 5,
              "score": 1.0,
              "level": "Excellent"
            },
            {
              "k": 10,
              "score": 1.0,
              "level": "Excellent"
            }
          ],
          "f1_analysis": [
            {
              "k": 1,
              "score": 0.5,
              "level": "Fair"
            },
            {
              "k": 3,
              "score": 0.9444444444444443,
              "level": "Excellent"
            },
            {
              "k": 5,
              "score": 0.9583333333333334,
              "level": "Excellent"
            },
            {
              "k": 10,
              "score": 0.8819659442724458,
              "level": "Excellent"
            }
          ],
          "ndcg_analysis": [
            {
              "k": 1,
              "score": 1.0,
              "level": "Excellent"
            },
            {
              "k": 3,
              "score": 0.9960166355966013,
              "level": "Excellent"
            },
            {
              "k": 5,
              "score": 0.9871435425951663,
              "level": "Excellent"
            },
            {
              "k": 10,
              "score": 0.9829627986883617,
              "level": "Excellent"
            }
          ],
          "system_quality": {
            "overall_score": 0.9016525720099604,
            "overall_level": "Excellent",
            "strengths": [
              "High ranking quality (good MRR)",
              "Good precision - relevant results",
              "Good recall - finds relevant documents"
            ],
            "weaknesses": [],
            "recommendations": []
          }
        },
        "performance_benchmarks": {
          "timestamp": "2025-12-02T17:33:09.592809",
          "retriever_type": "EnhancedFileCorpusRetriever",
          "results": {
            "single_term": {
              "query_type": "single_term",
              "queries_tested": 4,
              "timings": [
                0.033811092376708984,
                0.04711198806762695,
                0.03829598426818848,
                0.038697004318237305
              ],
              "result_counts": [
                6,
                10,
                10,
                10
              ],
              "avg_similarities": [
                1.0,
                0.9783868976737026,
                1.0,
                1.0
              ],
              "avg_time": 0.03947901725769043,
              "max_time": 0.04711198806762695,
              "min_time": 0.033811092376708984,
              "avg_results": 9.0,
              "avg_similarity": 0.9945967244184256
            },
            "phrase": {
              "query_type": "phrase",
              "queries_tested": 3,
              "timings": [
                0.035704851150512695,
                0.03792905807495117,
                0.055169105529785156
              ],
              "result_counts": [
                8,
                9,
                10
              ],
              "avg_similarities": [
                1.0,
                1.0,
                1.0
              ],
              "avg_time": 0.04293433825174967,
              "max_time": 0.055169105529785156,
              "min_time": 0.035704851150512695,
              "avg_results": 9.0,
              "avg_similarity": 1.0
            },
            "complex": {
              "query_type": "complex",
              "queries_tested": 3,
              "timings": [
                0.04219484329223633,
                0.12835383415222168,
                0.06538701057434082
              ],
              "result_counts": [
                10,
                10,
                10
              ],
              "avg_similarities": [
                1.0,
                1.0,
                1.0
              ],
              "avg_time": 0.07864522933959961,
              "max_time": 0.12835383415222168,
              "min_time": 0.04219484329223633,
              "avg_results": 10.0,
              "avg_similarity": 1.0
            },
            "scalability": {
              "test_query": "artificial intelligence machine learning neural networks",
              "k_values": [
                1,
                5,
                10,
                20,
                50,
                100
              ],
              "timings": [
                0.05523419380187988,
                0.055963993072509766,
                0.05630207061767578,
                0.05487704277038574,
                0.05466818809509277,
                0.050057411193847656
              ],
              "actual_results": [
                1,
                5,
                10,
                16,
                16,
                16
              ]
            },
            "memory": {
              "baseline_rss_mb": 56.21875,
              "baseline_vms_mb": 401826.0625,
              "max_rss_mb": 56.421875,
              "max_vms_mb": 401826.0625,
              "memory_increase_mb": 0.203125,
              "queries_tested": 25
            }
          }
        },
        "overall_assessment": {
          "validation_status": "PASS",
          "quality_level": "Excellent",
          "performance_acceptable": "True",
          "ready_for_production": "True"
        }
      },
      "production_ready": "True"
    },
    "integration": {
      "compatibility_tests": [
        {
          "test": "retrieve_interface",
          "passed": true,
          "details": "Returned 5 RetrievalResult objects"
        },
        {
          "test": "interface_compliance",
          "passed": true,
          "details": "Stats: <class 'dict'>, Ready: True, Valid query: True"
        },
        {
          "test": "result_format",
          "passed": true,
          "details": "Fields present: True, Valid similarity: True"
        }
      ],
      "compatibility_score": 1.0,
      "fully_compatible": true
    }
  },
  "assessment": {
    "overall_score": 1.0,
    "status": "PASS",
    "criteria": {
      "setup_successful": true,
      "enhanced_features_working": true,
      "quality_improvements": true,
      "performance_acceptable": true,
      "validation_passed": true,
      "integration_compatible": true
    }
  }
}